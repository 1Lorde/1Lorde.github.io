{"version":3,"sources":["views/packages/package_detail/PackageDetail.js","api/api_package.js"],"names":["PackageDetail","history","useHistory","id","useParams","pack","setPack","useState","hasLoaded","setHasLoaded","useEffect","getPackage","then","data","ok","console","log","message","store","addNotification","danger","error","className","style","width","orientation","src","name","htmlFor","type","required","placeholder","value","onChange","e","target","description","slug","active","price","monthly","parseInt","yearly","quota","account_officer","nasabah","color","onClick","updatePackage","success","push","Loader","API_URL","getPackages","axios","get","headers","apiHeader","response","catch","reason","getAdminPackages","authHeader","put","price_monthly","price_yearly","quota_AO","quota_nasabah","createPackage","post"],"mappings":"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","file":"static/js/43.07c8c5b5.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCardImage,\n  CCol,\n  CContainer,\n  CForm,\n  CFormInput,\n  CFormLabel,\n  CFormSelect,\n  CRow,\n} from '@coreui/react'\nimport { useHistory, useParams } from 'react-router-dom'\nimport Loader from '../../../components/Loader'\nimport { store } from 'react-notifications-component'\nimport { danger, success } from '../../../helpers/notifications'\nimport { getPackage, updatePackage } from '../../../api/api_package'\n\nconst PackageDetail = () => {\n  const history = useHistory()\n  let { id } = useParams()\n  const [pack, setPack] = useState({})\n  const [hasLoaded, setHasLoaded] = useState()\n\n  useEffect(\n    () => {\n      getPackage(id).then((data) => {\n        if (data.ok) {\n          setPack(data.data)\n          console.log(data.data)\n          setHasLoaded(true)\n        } else {\n          if (data.message) {\n            console.log(data)\n            store.addNotification(danger(data.message))\n          } else {\n            console.log(data)\n            store.addNotification(danger(data.error))\n          }\n        }\n      })\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [],\n  )\n\n  useEffect(() => {\n    console.log(pack)\n  }, [pack])\n\n  const handleEdit = () => {\n    console.log(pack)\n    updatePackage(pack.id, pack).then((data) => {\n      if (data.ok) {\n        store.addNotification(success('Package ' + pack.name + ' updated successfully.'))\n        history.push('/packages')\n      } else {\n        if (data.message) {\n          console.log(data)\n          store.addNotification(danger(data.message))\n        } else {\n          console.log(data)\n          store.addNotification(danger(data.error))\n        }\n      }\n    })\n  }\n\n  return hasLoaded ? (\n    <CContainer className=\"d-flex justify-content-center\">\n      <CCard style={{ width: '35rem' }}>\n        <CCardImage\n          orientation=\"top\"\n          src={\n            'https://via.placeholder.com/550x390.png?text=' + (pack.name ? pack.name : 'No name')\n          }\n        />\n        <CCardBody>\n          <CForm>\n            <CRow>\n              <CCol>\n                <div className=\"mb-3\">\n                  <CFormLabel htmlFor=\"name\">Name</CFormLabel>\n                  <CFormInput\n                    type=\"text\"\n                    id=\"name\"\n                    required\n                    placeholder=\"No data provided\"\n                    value={pack.name}\n                    onChange={(e) => {\n                      setPack((pack) => ({ ...pack, name: e.target.value }))\n                    }}\n                  />\n                </div>\n                <div className=\"mb-3\">\n                  <CFormLabel htmlFor=\"description\">Description</CFormLabel>\n                  <CFormInput\n                    type=\"text\"\n                    id=\"description\"\n                    placeholder=\"No data provided\"\n                    value={pack.description}\n                    onChange={(e) => {\n                      setPack((pack) => ({ ...pack, description: e.target.value }))\n                    }}\n                  />\n                </div>\n                <div className=\"mb-3\">\n                  <CFormLabel htmlFor=\"slug\">Slug</CFormLabel>\n                  <CFormInput\n                    type=\"text\"\n                    id=\"slug\"\n                    required\n                    placeholder=\"No data provided\"\n                    value={pack.slug}\n                    onChange={(e) => {\n                      setPack((pack) => ({ ...pack, slug: e.target.value }))\n                    }}\n                  />\n                </div>\n                <div className=\"mb-3\">\n                  <CFormLabel htmlFor=\"status\">Status</CFormLabel>\n                  <CFormSelect\n                    id=\"status\"\n                    value={pack.active}\n                    onChange={(e) => {\n                      setPack((pack) => ({ ...pack, active: e.target.value }))\n                    }}\n                  >\n                    <option value=\"true\">Active</option>\n                    <option value=\"false\">Inactive</option>\n                  </CFormSelect>\n                </div>\n                <div className=\"pt-1\">\n                  <hr />\n                  <h3>Price</h3>\n                  <CRow className=\"pt-2\">\n                    <CCol>\n                      <div className=\"mb-3\">\n                        <CFormLabel htmlFor=\"monthly\">Monthly</CFormLabel>\n                        <CFormInput\n                          type=\"number\"\n                          id=\"monthly\"\n                          required\n                          placeholder=\"No data provided\"\n                          value={pack.price.monthly}\n                          onChange={(e) => {\n                            setPack((pack) => ({\n                              ...pack,\n                              price: {\n                                ...pack.price,\n                                monthly: parseInt(e.target.value),\n                              },\n                            }))\n                          }}\n                        />\n                      </div>\n                    </CCol>\n                    <CCol>\n                      <div className=\"mb-3\">\n                        <CFormLabel htmlFor=\"yearly\">Yearly</CFormLabel>\n                        <CFormInput\n                          type=\"number\"\n                          id=\"yearly\"\n                          required\n                          placeholder=\"No data provided\"\n                          value={pack.price.yearly}\n                          onChange={(e) => {\n                            setPack((pack) => ({\n                              ...pack,\n                              price: {\n                                ...pack.price,\n                                yearly: parseInt(e.target.value),\n                              },\n                            }))\n                          }}\n                        />\n                      </div>\n                    </CCol>\n                  </CRow>\n                </div>\n\n                <div>\n                  <hr />\n                  <h3>Quota</h3>\n                  <CRow className=\"pt-2\">\n                    <CCol>\n                      <div className=\"mb-3\">\n                        <CFormLabel htmlFor=\"account_officer\">Account Officer</CFormLabel>\n                        <CFormInput\n                          type=\"number\"\n                          id=\"account_officer\"\n                          required\n                          placeholder=\"No data provided\"\n                          value={pack.quota.account_officer}\n                          onChange={(e) => {\n                            setPack((pack) => ({\n                              ...pack,\n                              quota: {\n                                ...pack.quota,\n                                account_officer: parseInt(e.target.value),\n                              },\n                            }))\n                          }}\n                        />\n                      </div>\n                    </CCol>\n                    <CCol>\n                      <div className=\"mb-3\">\n                        <CFormLabel htmlFor=\"nasabah\">Nasabah</CFormLabel>\n                        <CFormInput\n                          type=\"number\"\n                          id=\"nasabah\"\n                          required\n                          placeholder=\"No data provided\"\n                          value={pack.quota.nasabah}\n                          onChange={(e) => {\n                            setPack((pack) => ({\n                              ...pack,\n                              quota: {\n                                ...pack.quota,\n                                nasabah: parseInt(e.target.value),\n                              },\n                            }))\n                          }}\n                        />\n                      </div>\n                    </CCol>\n                  </CRow>\n                </div>\n              </CCol>\n            </CRow>\n            <CRow className=\"mt-3 mb-1\">\n              <div className=\"d-flex justify-content-end\">\n                <CButton color=\"primary\" onClick={handleEdit}>\n                  Edit\n                </CButton>\n              </div>\n            </CRow>\n          </CForm>\n        </CCardBody>\n      </CCard>\n    </CContainer>\n  ) : (\n    Loader()\n  )\n}\n\nexport default PackageDetail\n","import axios from 'axios'\nimport { apiHeader, authHeader } from './requestHeaders'\n\nconst API_URL = 'https://api.ekoop.id/v01'\n\nexport function getPackages() {\n  return axios\n    .get(API_URL + '/users/packages', { headers: apiHeader() })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      console.log(reason)\n    })\n}\n\nexport function getAdminPackages() {\n  return axios\n    .get(API_URL + '/users/admin/packages', { headers: authHeader() })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      console.log(reason)\n    })\n}\n\nexport function getPackage(id) {\n  return axios\n    .get(API_URL + '/users/admin/packages/' + id, { headers: authHeader() })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      console.log(reason)\n    })\n}\n\nexport function updatePackage(id, pack) {\n  return axios\n    .put(\n      API_URL + '/users/admin/packages/' + id,\n      {\n        name: pack.name,\n        slug: pack.slug,\n        description: pack.description,\n        price_monthly: pack.price.monthly,\n        price_yearly: pack.price.yearly,\n        quota_AO: pack.quota.account_officer,\n        quota_nasabah: pack.quota.nasabah,\n        active: pack.active === 'true',\n      },\n      {\n        headers: authHeader(),\n      },\n    )\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      return reason.response.data\n    })\n}\n\nexport function createPackage(pack) {\n  return axios\n    .post(\n      API_URL + '/users/admin/packages',\n      {\n        name: pack.name,\n        slug: pack.slug,\n        description: pack.description,\n        price_monthly: pack.price.monthly,\n        price_yearly: pack.price.yearly,\n        quota_AO: pack.quota.account_officer,\n        quota_nasabah: pack.quota.nasabah,\n      },\n      {\n        headers: authHeader(),\n      },\n    )\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      return reason.response.data\n    })\n}\n"],"sourceRoot":""}