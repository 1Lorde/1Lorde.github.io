{"version":3,"sources":["../../node_modules/style-inject/dist/style-inject.es.js","../../src/index.js","views/pages/input_otp/InputOtp.js","api/requestHeaders.js","helpers/notifications.js","api/api_auth.js"],"names":["css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","KEY_CODE","ReactCodeInput","fields","props","values","vals","autoFocusIndex","i","Array","React","this","loading","title","fieldHeight","fieldWidth","autoFocus","className","INPUT_STYLE","ROOT_STYLE","LOADING_STYLE","styles","index","onKeyDown","onFocus","Component","propTypes","PropTypes","defaultProps","__clearvalues__","triggerChange","onChange","onComplete","val","e","parseInt","next","value","Object","nextIndex","cursor","prevIndex","prev","InputOtp","userState","useContext","UserContext","history","useHistory","otp","setOtp","useState","isLoading","setIsLoading","useEffect","console","log","keys","length","getPrototypeOf","prototype","push","xl","color","onClick","status","UserStatus","WAITING_FOR_OTP","changePasswordOtp","then","data","store","addNotification","success","message","TRY_TO_LOGIN","loginOtp","temp_token","RESET_PASS","resetPasswordOtp","ok","danger","handleOtp","createUUID","replace","c","crypto","getRandomValues","Uint8Array","toString","authHeader","isPermanentTokenExist","Authorization","localStorage","getItem","apiHeader","insert","container","animationIn","animationOut","dismiss","duration","info","API_URL","login","waNumber","password","axios","post","wa_number","headers","response","catch","reason","auth_id","access_token","setItem","changePassword","oldPassword","newPassword","old_password","new_password","forgotPassword","ktpId","ktp_id","resetPassword","userId","token","user_id","authId"],"mappings":"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","file":"static/js/41.25b87310.chunk.js","sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './styles.css';\n\nconst KEY_CODE = {\n  backspace: 8,\n  left: 37,\n  up: 38,\n  right: 39,\n  down: 40\n};\n\nexport default class ReactCodeInput extends Component {\n  static propTypes = {\n    type: PropTypes.oneOf(['text', 'number']),\n    onChange: PropTypes.func,\n    onComplete: PropTypes.func,\n    fields: PropTypes.number,\n    loading: PropTypes.bool,\n    title: PropTypes.string,\n    fieldWidth: PropTypes.number,\n    id: PropTypes.string,\n    fieldHeight: PropTypes.number,\n    autoFocus: PropTypes.bool,\n    className: PropTypes.string,\n    values: PropTypes.arrayOf(PropTypes.string),\n    disabled: PropTypes.bool,\n    required: PropTypes.bool,\n    placeholder: PropTypes.arrayOf(PropTypes.string)\n  };\n\n  static defaultProps = {\n    type: 'number',\n    fields: 6,\n    fieldWidth: 58,\n    fieldHeight: 54,\n    autoFocus: true,\n    disabled: false,\n    required: false,\n    placeholder: []\n  };\n\n  constructor(props) {\n    super(props);\n    const { fields, values } = props;\n    let vals;\n    let autoFocusIndex = 0;\n    if (values && values.length) {\n      vals = [];\n      for (let i = 0; i < fields; i++) {\n        vals.push(values[i] || '');\n      }\n      autoFocusIndex = values.length >= fields ? 0 : values.length;\n    } else {\n      vals = Array(fields).fill('');\n    }\n    this.state = { values: vals, autoFocusIndex };\n\n    this.iRefs = [];\n    for (let i = 0; i < fields; i++) {\n      this.iRefs.push(React.createRef());\n    }\n    this.id = +new Date();\n\n    // this.handleKeys = Array(fields).fill(false);\n  }\n\n  /**\n   * Clear all field value & focus first field\n   */\n  __clearvalues__ = () => {\n    const { fields } = this.props;\n    this.setState({ values: Array(fields).fill('') });\n    this.iRefs[0].current.focus();\n  };\n\n  triggerChange = (values = this.state.values) => {\n    const { onChange, onComplete, fields } = this.props;\n    const val = values.join('');\n    onChange && onChange(val);\n    if (onComplete && val.length >= fields) {\n      onComplete(val);\n    }\n  };\n\n  onChange = e => {\n    const index = parseInt(e.target.dataset.id);\n    if (this.props.type === 'number') {\n      e.target.value = e.target.value.replace(/[^\\d]/gi, '');\n    }\n    // this.handleKeys[index] = false;\n    if (\n      e.target.value === '' ||\n      (this.props.type === 'number' && !e.target.validity.valid)\n    ) {\n      return;\n    }\n    const { fields } = this.props;\n    let next;\n    const value = e.target.value;\n    let { values } = this.state;\n    values = Object.assign([], values);\n    if (value.length > 1) {\n      let nextIndex = value.length + index - 1;\n      if (nextIndex >= fields) {\n        nextIndex = fields - 1;\n      }\n      next = this.iRefs[nextIndex];\n      const split = value.split('');\n      split.forEach((item, i) => {\n        const cursor = index + i;\n        if (cursor < fields) {\n          values[cursor] = item;\n        }\n      });\n      this.setState({ values });\n    } else {\n      next = this.iRefs[index + 1];\n      values[index] = value;\n      this.setState({ values });\n    }\n\n    if (next) {\n      next.current.focus();\n      next.current.select();\n    }\n\n    this.triggerChange(values);\n  };\n\n  onKeyDown = e => {\n    const index = parseInt(e.target.dataset.id);\n    const prevIndex = index - 1;\n    const nextIndex = index + 1;\n    const prev = this.iRefs[prevIndex];\n    const next = this.iRefs[nextIndex];\n    switch (e.keyCode) {\n      case KEY_CODE.backspace:\n        e.preventDefault();\n        const vals = [...this.state.values];\n        if (this.state.values[index]) {\n          vals[index] = '';\n          this.setState({ values: vals });\n          this.triggerChange(vals);\n        } else if (prev) {\n          vals[prevIndex] = '';\n          prev.current.focus();\n          this.setState({ values: vals });\n          this.triggerChange(vals);\n        }\n        break;\n      case KEY_CODE.left:\n        e.preventDefault();\n        if (prev) {\n          prev.current.focus();\n        }\n        break;\n      case KEY_CODE.right:\n        e.preventDefault();\n        if (next) {\n          next.current.focus();\n        }\n        break;\n      case KEY_CODE.up:\n      case KEY_CODE.down:\n        e.preventDefault();\n        break;\n      default:\n        // this.handleKeys[index] = true;\n        break;\n    }\n  };\n\n  // onKeyUp = e => {\n  //   const index = parseInt(e.target.dataset.id);\n  //   if (this.handleKeys[index]) {\n  //     this.handleKeys[index] = false;\n  //     const next = this.iRefs[index + 1];\n  //     if (next) {\n  //       next.current.focus();\n  //     }\n  //   }\n  // };\n\n  onFocus = e => {\n    e.target.select(e);\n  };\n\n  render() {\n    const { values, autoFocusIndex } = this.state;\n    const {\n      loading,\n      title,\n      fieldHeight,\n      fieldWidth,\n      fields,\n      autoFocus,\n      className,\n      type\n    } = this.props;\n    const INPUT_STYLE = {\n      width: fieldWidth,\n      height: fieldHeight\n    };\n    const ROOT_STYLE = {\n      width: fields * fieldWidth\n    };\n    const LOADING_STYLE = {\n      lineHeight: `${fieldHeight}px`\n    };\n    return (\n      <div\n        className={`${styles['react-code-input-container']} ${className}`}\n        style={ROOT_STYLE}\n      >\n        {title && <p className={styles['title']}>{title}</p>}\n        <div className={styles['react-code-input']}>\n          {values.map((value, index) => (\n            <input\n              type={type === 'number' ? 'tel' : type}\n              pattern={type === 'number' ? '[0-9]*' : null}\n              autoFocus={autoFocus && index === autoFocusIndex}\n              style={INPUT_STYLE}\n              key={`${this.id}-${index}`}\n              data-id={index}\n              value={value}\n              id={this.props.id ? `${this.props.id}-${index}` : null}\n              ref={this.iRefs[index]}\n              onChange={this.onChange}\n              onKeyDown={this.onKeyDown}\n              // onKeyUp={this.onKeyUp}\n              onFocus={this.onFocus}\n              disabled={this.props.disabled}\n              required={this.props.required}\n              placeholder={this.props.placeholder[index]}\n            />\n          ))}\n        </div>\n        {loading && (\n          <div className={styles['loading']} style={LOADING_STYLE}>\n            <div className={styles['blur']} />\n            <svg\n              className={styles['spin']}\n              viewBox=\"0 0 1024 1024\"\n              data-icon=\"loading\"\n              width=\"1em\"\n              height=\"1em\"\n              fill=\"currentColor\"\n              aria-hidden=\"true\"\n            >\n              <path\n                fill=\"#006fff\"\n                d=\"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z\"\n              />\n            </svg>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","import React, { useContext, useEffect, useState } from 'react'\nimport ReactCodeInput from 'react-verification-code-input'\n\nimport { CButton, CCard, CCardBody, CCol, CContainer, CForm, CRow } from '@coreui/react'\nimport { UserContext, UserStatus } from '../../../helpers/user'\nimport { useHistory } from 'react-router-dom'\nimport { store } from 'react-notifications-component'\nimport { danger, success } from '../../../helpers/notifications'\nimport { changePasswordOtp, loginOtp, resetPasswordOtp } from '../../../api/api_auth'\n\nconst InputOtp = () => {\n  const { userState } = useContext(UserContext)\n  const history = useHistory()\n  const [otp, setOtp] = useState('')\n  const [isLoading, setIsLoading] = useState()\n\n  useEffect(\n    () => {\n      console.log(userState)\n      if (\n        userState &&\n        Object.keys(userState).length === 0 &&\n        Object.getPrototypeOf(userState) === Object.prototype\n      ) {\n        history.push('/login')\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [],\n  )\n\n  function handleOtp(otp) {\n    setIsLoading(true)\n    if (userState.status === UserStatus.WAITING_FOR_OTP) {\n      changePasswordOtp(otp).then((data) => {\n        console.log(data)\n        store.addNotification(success(data.message))\n        setIsLoading(false)\n        history.push('/profile')\n      })\n    } else if (userState.status === UserStatus.TRY_TO_LOGIN) {\n      loginOtp(userState.temp_token, otp).then((data) => {\n        console.log(data)\n        store.addNotification(success('Welcome back!'))\n        setIsLoading(false)\n        history.push('/profile')\n      })\n    } else if (userState.status === UserStatus.RESET_PASS) {\n      resetPasswordOtp(userState.temp_token, otp).then((data) => {\n        if (data.ok === true) {\n          console.log(data)\n          store.addNotification(success(data.message))\n          setIsLoading(false)\n          history.push('/profile')\n        } else {\n          store.addNotification(danger(data.message))\n          setIsLoading(false)\n        }\n      })\n    }\n  }\n\n  return (\n    <div className=\"bg-light min-vh-100 d-flex flex-row align-items-center\">\n      <CContainer>\n        <CRow className=\"justify-content-center\">\n          <CCol xl={4}>\n            <CCard className=\"p-4\">\n              <CCardBody>\n                <CForm>\n                  <h2>Input OTP</h2>\n                  <br />\n                  <CRow>\n                    <CCol className=\"d-flex justify-content-center\">\n                      <ReactCodeInput\n                        loading={isLoading}\n                        autoFocus={true}\n                        fieldWidth={40}\n                        onChange={(e) => setOtp(e)}\n                      />\n                    </CCol>\n                  </CRow>\n                  <br />\n                  <CRow>\n                    <CCol className=\"d-flex justify-content-end\">\n                      <CButton color=\"primary\" className=\"px-4\" onClick={(e) => handleOtp(otp)}>\n                        Submit\n                      </CButton>\n                    </CCol>\n                  </CRow>\n                </CForm>\n              </CCardBody>\n            </CCard>\n          </CCol>\n        </CRow>\n      </CContainer>\n    </div>\n  )\n}\n\nexport default InputOtp\n","import { isPermanentTokenExist } from '../helpers/user'\n\nfunction createUUID() {\n  return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, (c) =>\n    (c ^ (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))).toString(16),\n  )\n}\n\nexport function authHeader() {\n  if (isPermanentTokenExist()) {\n    const token = localStorage.getItem('token')\n    return {\n      Authorization: 'Bearer ' + token,\n      'Ekoop-Api-Key': '4a6e486c-3167-4112-97e7-5aa690042613',\n      'X-Request-Id': createUUID(),\n    }\n  } else {\n    return {}\n  }\n}\n\nexport function apiHeader() {\n  return {\n    'Ekoop-Api-Key': '4a6e486c-3167-4112-97e7-5aa690042613',\n    'X-Request-Id': createUUID(),\n  }\n}\n","export function success(message) {\n  return {\n    title: 'Success',\n    message: message,\n    type: 'success',\n    insert: 'bottom',\n    container: 'bottom-right',\n    animationIn: ['animate__animated', 'animate__fadeIn'],\n    animationOut: ['animate__animated', 'animate__fadeOut'],\n    dismiss: {\n      duration: 5000,\n    },\n  }\n}\n\nexport function danger(message) {\n  return {\n    title: 'Error',\n    message: message,\n    type: 'danger',\n    insert: 'bottom',\n    container: 'bottom-right',\n    animationIn: ['animate__animated', 'animate__fadeIn'],\n    animationOut: ['animate__animated', 'animate__fadeOut'],\n    dismiss: {\n      duration: 5000,\n    },\n  }\n}\n\nexport function info(message) {\n  return {\n    title: 'Info',\n    message: message,\n    type: 'info',\n    insert: 'bottom',\n    container: 'bottom-right',\n    animationIn: ['animate__animated', 'animate__fadeIn'],\n    animationOut: ['animate__animated', 'animate__fadeOut'],\n    dismiss: {\n      duration: 5000,\n    },\n  }\n}\n\nexport function warning(message) {\n  return {\n    title: 'Warning',\n    message: message,\n    type: 'warning',\n    insert: 'bottom',\n    container: 'bottom-right',\n    animationIn: ['animate__animated', 'animate__fadeIn'],\n    animationOut: ['animate__animated', 'animate__fadeOut'],\n    dismiss: {\n      duration: 5000,\n    },\n  }\n}\n","import axios from 'axios'\nimport { apiHeader, authHeader } from './requestHeaders'\n\nconst API_URL = 'https://api.ekoop.id/v01'\n\nexport function login(waNumber, password) {\n  return axios\n    .post(\n      API_URL + '/auth/auth/login/password',\n      {\n        wa_number: waNumber,\n        password: password,\n      },\n      {\n        headers: apiHeader(),\n      },\n    )\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      return reason.response.data\n    })\n}\n\nexport function loginOtp(auth_id, otp) {\n  return axios\n    .post(\n      API_URL + '/auth/auth/login/otp',\n      {\n        auth_id: auth_id,\n        otp: otp,\n      },\n      {\n        headers: apiHeader(),\n      },\n    )\n    .then((response) => {\n      if (response.data.access_token) {\n        localStorage.setItem('token', response.data.access_token)\n      }\n      return response.data\n    })\n}\n\nexport function changePassword(oldPassword, newPassword) {\n  return axios\n    .post(\n      API_URL + '/auth/profile/change_password',\n      {\n        old_password: oldPassword,\n        new_password: newPassword,\n      },\n      { headers: authHeader() },\n    )\n    .then((response) => {\n      console.log(response.data)\n      return response.data\n    })\n}\n\nexport function changePasswordOtp(otp) {\n  return axios\n    .post(\n      API_URL + '/auth/profile/change_password/otp',\n      {\n        otp: otp,\n      },\n      {\n        headers: authHeader(),\n      },\n    )\n    .then((response) => {\n      console.log(response)\n      return response.data\n    })\n}\n\nexport function forgotPassword(waNumber, ktpId) {\n  return axios\n    .post(\n      API_URL + '/auth/auth/forgot_password',\n      {\n        wa_number: waNumber,\n        ktp_id: ktpId,\n      },\n      {\n        headers: apiHeader(),\n      },\n    )\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      return reason.response.data\n    })\n}\n\nexport function resetPassword(userId, token, newPassword) {\n  console.log(userId)\n  return axios\n    .post(\n      API_URL + '/auth/auth/reset_password',\n      {\n        user_id: userId,\n        token: token,\n        new_password: newPassword,\n      },\n      {\n        headers: apiHeader(),\n      },\n    )\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      return reason.response.data\n    })\n}\n\nexport function resetPasswordOtp(authId, otp) {\n  return axios\n    .post(\n      API_URL + '/auth/auth/reset_password_otp',\n      {\n        auth_id: authId,\n        otp: otp,\n      },\n      {\n        headers: apiHeader(),\n      },\n    )\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      return reason.response.data\n    })\n}\n"],"sourceRoot":""}