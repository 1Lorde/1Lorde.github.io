{"version":3,"sources":["views/user/user_details/UserDetails.js","api/api_user.js"],"names":["UserDetails","history","useHistory","id","useParams","user","setUser","useState","hasLoaded","setHasLoaded","useEffect","getUser","then","profile_data","className","style","width","orientation","src","avatar","avatar_placeholder","htmlFor","type","value","name","onChange","e","target","ktp_id","wa_number","address","role","userRole","AdminRoles","KoperasiRoles","console","log","status","disabled","color","variant","onClick","updateUser","data","ok","store","addNotification","success","message","push","danger","Loader","API_URL","getUsers","searchQuery","sort","axios","get","headers","authHeader","response","catch","reason","put","createUser","post"],"mappings":"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","file":"static/js/19.194f7490.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCardImage,\n  CContainer,\n  CForm,\n  CFormInput,\n  CFormLabel,\n  CFormSelect,\n} from '@coreui/react'\n\nimport avatar_placeholder from '../../../assets/images/avatar_placeholder.png'\nimport { useHistory, useParams } from 'react-router-dom'\nimport { store } from 'react-notifications-component'\nimport { danger, success } from '../../../helpers/notifications'\nimport Loader from '../../../components/Loader'\nimport { AdminRoles, KoperasiRoles } from '../../../helpers/role'\nimport { getUser, updateUser } from '../../../api/api_user'\n\nconst UserDetails = () => {\n  const history = useHistory()\n  let { id } = useParams()\n  const [user, setUser] = useState()\n  const [hasLoaded, setHasLoaded] = useState()\n\n  function getPositions(userRole) {\n    if (userRole in AdminRoles) {\n      return (\n        <>\n          <option value=\"app-owner\">App Owner</option>\n          <option value=\"product-technical\">Product & Technical</option>\n          <option value=\"marketing-finance\">Marketing & Finance</option>\n        </>\n      )\n    } else if (userRole in KoperasiRoles) {\n      return (\n        <>\n          <option value=\"koperasi-owner\">Koperasi Owner</option>\n          <option value=\"credit-analyst\">Credit & Analyst</option>\n          <option value=\"account-officer\">Account Officer</option>\n        </>\n      )\n    } else {\n      console.log('Not valid role: ' + userRole)\n    }\n  }\n\n  useEffect(\n    () => {\n      getUser(id).then((profile_data) => {\n        setUser(profile_data)\n        setHasLoaded(true)\n      })\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [],\n  )\n\n  const handleEdit = () => {\n    console.log(user)\n    updateUser(user).then((data) => {\n      if (data.ok) {\n        store.addNotification(success(data.message))\n        history.push('/users')\n      } else {\n        store.addNotification(danger(data.message))\n      }\n    })\n  }\n\n  return hasLoaded ? (\n    <CContainer className=\"d-flex justify-content-center\">\n      <CCard style={{ width: '35rem' }}>\n        <CCardImage orientation=\"top\" src={!user.avatar ? avatar_placeholder : user.avatar} />\n        <CCardBody>\n          <CForm>\n            <div className=\"mb-3\">\n              <CFormLabel htmlFor=\"fullnameInput\">Full Name</CFormLabel>\n              <CFormInput\n                type=\"text\"\n                id=\"fullnameInput\"\n                value={user.name}\n                onChange={(e) => {\n                  setUser((user) => ({ ...user, name: e.target.value }))\n                }}\n              />\n            </div>\n            <div className=\"mb-3\">\n              <CFormLabel htmlFor=\"ktpnumberInput\">KTP Number</CFormLabel>\n              <CFormInput\n                type=\"text\"\n                id=\"ktpnumberInput\"\n                value={user.ktp_id}\n                onChange={(e) => {\n                  setUser((user) => ({ ...user, ktp_id: e.target.value }))\n                }}\n              />\n            </div>\n            <div className=\"mb-3\">\n              <CFormLabel htmlFor=\"wanumberInput\">WhatsApp Number</CFormLabel>\n              <CFormInput\n                type=\"text\"\n                id=\"wanumberInput\"\n                value={user.wa_number}\n                onChange={(e) => {\n                  setUser((user) => ({ ...user, wa_number: e.target.value }))\n                }}\n              />\n            </div>\n            <div className=\"mb-3\">\n              <CFormLabel htmlFor=\"addressInput\">Address</CFormLabel>\n              <CFormInput\n                type=\"text\"\n                id=\"addressInput\"\n                value={user.address}\n                onChange={(e) => {\n                  setUser((user) => ({ ...user, address: e.target.value }))\n                }}\n              />\n            </div>\n            <div className=\"mb-3\">\n              <CFormLabel htmlFor=\"positionInput\">Position</CFormLabel>\n              <CFormSelect\n                aria-label=\"Position\"\n                value={user.role}\n                onChange={(e) => {\n                  setUser((user) => ({ ...user, role: e.target.value }))\n                }}\n              >\n                {getPositions(user.role)}\n              </CFormSelect>\n            </div>\n            <div className=\"mb-4\">\n              <CFormLabel htmlFor=\"statusInput\">Status</CFormLabel>\n              <CFormSelect\n                aria-label=\"Status\"\n                value={user.status}\n                onChange={(e) => {\n                  setUser((user) => ({ ...user, status: e.target.value }))\n                }}\n              >\n                <option disabled>Please select</option>\n                <option value=\"active\">Active</option>\n                <option value=\"inactive\">Inactive</option>\n              </CFormSelect>\n            </div>\n            <div className=\"d-flex justify-content-center\">\n              <CButton color=\"primary\" variant=\"outline\" onClick={handleEdit}>\n                Save changes\n              </CButton>\n            </div>\n          </CForm>\n        </CCardBody>\n      </CCard>\n    </CContainer>\n  ) : (\n    Loader()\n  )\n}\n\nexport default UserDetails\n","import axios from 'axios'\nimport { authHeader } from './requestHeaders'\n\nconst API_URL = 'https://api.ekoop.id/v01'\n\nexport function getUsers(searchQuery, status, role, sort) {\n  return axios\n    .get(\n      API_URL +\n        '/auth/user?search=' +\n        searchQuery +\n        '&status=' +\n        status +\n        '&role=' +\n        role +\n        '&sort=' +\n        sort,\n      {\n        headers: authHeader(),\n      },\n    )\n    .then((response) => {\n      return response.data.data\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n\nexport function getUser(id) {\n  return axios\n    .get(API_URL + '/auth/user/' + id, { headers: authHeader() })\n    .then((response) => {\n      return response.data.data\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n\nexport function updateUser(user) {\n  return axios\n    .put(\n      API_URL + '/auth/user/' + user.id,\n      {\n        wa_number: user.wa_number,\n        name: user.name,\n        address: user.address,\n        role: user.role,\n        status: user.status,\n        // avatar: user.avatar,\n        // ktp_image: user.ktp_image,\n      },\n      {\n        headers: authHeader(),\n      },\n    )\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      return reason.response.data\n    })\n}\n\nexport function createUser(user) {\n  return axios\n    .post(API_URL + '/auth/user', user, {\n      headers: authHeader(),\n    })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      return reason.response.data\n    })\n}\n"],"sourceRoot":""}