{"version":3,"sources":["views/user/user_create/UserCreate.js","helpers/api_requests.js"],"names":["UserCreate","history","useHistory","userState","useContext","UserContext","user","setUser","useState","role","validated","setValidated","className","style","width","noValidate","onSubmit","event","preventDefault","form","currentTarget","checkValidity","stopPropagation","console","log","createUser","then","data","ok","store","addNotification","success","wa_number","push","danger","message","htmlFor","type","id","required","defaultValue","name","onChange","e","target","value","minLength","ktp_id","invalid","pattern","address","disabled","userRole","Roles","color","variant","API_URL","getUsers","searchQuery","status","sort","axios","get","headers","authHeader","response","catch","reason","getUser","updateUser","put","post","getClient","updateClient","clientId","client","getClients","getProducts","createProduct","product","updateProduct","changes","description","balance_start","percent_rate","limit_min","limit_max","active","rate_type","credit_simulation_id","getServices","getNasabah","nasabah_list","getNasabahCount","getAccountOfficerCount"],"mappings":"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","file":"static/js/14.342b2aad.chunk.js","sourcesContent":["import React, { useContext, useState } from 'react'\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CContainer,\n  CForm,\n  CFormFeedback,\n  CFormInput,\n  CFormLabel,\n  CFormSelect,\n} from '@coreui/react'\n\nimport { useHistory } from 'react-router-dom'\nimport { store } from 'react-notifications-component'\nimport { danger, success } from '../../../helpers/notifications'\nimport { createUser } from '../../../helpers/api_requests'\nimport { Roles } from '../../../helpers/role'\nimport { UserContext } from '../../../helpers/user'\n\nconst UserCreate = () => {\n  const history = useHistory()\n  const { userState } = useContext(UserContext)\n  const [user, setUser] = useState({ role: 'koperasi-owner' })\n  const [validated, setValidated] = useState(false)\n\n  function getPositions(userRole) {\n    if (Roles[userRole] === Roles['app-owner']) {\n      return (\n        <>\n          <option value=\"app-owner\">App Owner</option>\n          <option value=\"product-technical\">Product & Technical</option>\n          <option value=\"marketing-finance\">Marketing & Finance</option>\n        </>\n      )\n    } else if (Roles[userRole] === Roles['koperasi-owner']) {\n      return (\n        <>\n          <option value=\"koperasi-owner\">Koperasi Owner</option>\n          <option value=\"credit-analyst\">Credit & Analyst</option>\n          <option value=\"account-officer\">Account Officer</option>\n        </>\n      )\n    } else {\n      console.log('Not valid role: ' + userRole)\n    }\n  }\n\n  const handleCreate = (event) => {\n    event.preventDefault()\n\n    const form = event.currentTarget\n    if (form.checkValidity() === false) {\n      event.preventDefault()\n      event.stopPropagation()\n    }\n    setValidated(true)\n\n    if (form.checkValidity()) {\n      console.log(user)\n      createUser(user).then((data) => {\n        if (data.ok) {\n          store.addNotification(success('User (' + data.wa_number + ') created'))\n          history.push('/users')\n        } else {\n          store.addNotification(danger(data.message))\n        }\n      })\n    }\n  }\n\n  return (\n    <CContainer className=\"d-flex justify-content-center\">\n      <CCard style={{ width: '35rem' }}>\n        <CCardBody>\n          <CForm noValidate validated={validated} onSubmit={handleCreate}>\n            <div className=\"mb-3\">\n              <CFormLabel htmlFor=\"fullnameInput\">Full Name</CFormLabel>\n              <CFormInput\n                type=\"text\"\n                id=\"fullnameInput\"\n                required\n                defaultValue={user.name}\n                onChange={(e) => {\n                  setUser((user) => ({ ...user, name: e.target.value }))\n                }}\n              />\n            </div>\n            <div className=\"mb-3\">\n              <CFormLabel htmlFor=\"ktpnumberInput\">KTP Number</CFormLabel>\n              <CFormInput\n                type=\"text\"\n                id=\"ktpnumberInput\"\n                minLength={16}\n                required\n                defaultValue={user.ktp_id}\n                onChange={(e) => {\n                  setUser((user) => ({ ...user, ktp_id: e.target.value }))\n                }}\n              />\n              <CFormFeedback invalid>\n                Please provide a valid phone number (min length 16).\n              </CFormFeedback>\n            </div>\n            <div className=\"mb-3\">\n              <CFormLabel htmlFor=\"wanumberInput\">WhatsApp Number</CFormLabel>\n              <CFormInput\n                type=\"tel\"\n                pattern=\"^\\+62[0-9]{9,15}$\"\n                required\n                defaultValue={user.wa_number}\n                onChange={(e) => {\n                  setUser((user) => ({ ...user, wa_number: e.target.value }))\n                }}\n              />\n              <CFormFeedback invalid>Please provide a valid phone number.</CFormFeedback>\n            </div>\n            <div className=\"mb-3\">\n              <CFormLabel htmlFor=\"addressInput\">Address</CFormLabel>\n              <CFormInput\n                type=\"text\"\n                id=\"addressInput\"\n                minLength={5}\n                required\n                defaultValue={user.address}\n                onChange={(e) => {\n                  setUser((user) => ({ ...user, address: e.target.value }))\n                }}\n              />\n              <CFormFeedback invalid>\n                Please provide a valid phone number (min length 5).\n              </CFormFeedback>\n            </div>\n            <div className=\"mb-3\">\n              <CFormLabel htmlFor=\"positionInput\">Position</CFormLabel>\n              <CFormSelect\n                aria-label=\"Position\"\n                defaultValue={user.role}\n                onChange={(e) => {\n                  setUser((user) => ({ ...user, role: e.target.value }))\n                }}\n              >\n                <option disabled>Please select</option>\n                {getPositions(userState.user.role)}\n              </CFormSelect>\n            </div>\n            <div className=\"d-flex justify-content-center\">\n              <CButton color=\"primary\" variant=\"outline\" type=\"submit\">\n                Create\n              </CButton>\n            </div>\n          </CForm>\n        </CCardBody>\n      </CCard>\n    </CContainer>\n  )\n}\n\nexport default UserCreate\n","import axios from 'axios'\nimport { authHeader } from './requestHeaders'\n\nconst API_URL = 'https://api.ekoop.id/v01'\n\nexport function getUsers(searchQuery, status, role, sort) {\n  return axios\n    .get(\n      API_URL +\n        '/auth/user?search=' +\n        searchQuery +\n        '&status=' +\n        status +\n        '&role=' +\n        role +\n        '&sort=' +\n        sort,\n      {\n        headers: authHeader(),\n      },\n    )\n    .then((response) => {\n      return response.data.data\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n\nexport function getUser(id) {\n  return axios\n    .get(API_URL + '/auth/user/' + id, { headers: authHeader() })\n    .then((response) => {\n      return response.data.data\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n\nexport function updateUser(user) {\n  return axios\n    .put(\n      API_URL + '/auth/user/' + user.id,\n      {\n        wa_number: user.wa_number,\n        name: user.name,\n        address: user.address,\n        role: user.role,\n        status: user.status,\n        // avatar: user.avatar,\n        // ktp_image: user.ktp_image,\n      },\n      {\n        headers: authHeader(),\n      },\n    )\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      return reason.response.data\n    })\n}\n\nexport function createUser(user) {\n  return axios\n    .post(API_URL + '/auth/user', user, {\n      headers: authHeader(),\n    })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      return reason.response.data\n    })\n}\n\nexport function getClient(id) {\n  return axios\n    .get(API_URL + '/users/admin/client/' + id, { headers: authHeader() })\n    .then((response) => {\n      return response.data.data\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n\nexport function updateClient(clientId, client) {\n  return axios\n    .put(API_URL + '/users/admin/client/' + clientId, client, {\n      headers: authHeader(),\n    })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      return reason.response.data\n    })\n}\n\nexport function getClients(searchQuery, status, sort) {\n  return axios\n    .get(\n      API_URL + '/users/admin/client?search=' + searchQuery + '&status=' + status + '&sort=' + sort,\n      { headers: authHeader() },\n    )\n    .then((response) => {\n      return response.data.data\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n\nexport function getProducts(searchQuery, type) {\n  return axios\n    .get(API_URL + '/transaction/products?search=' + searchQuery + '&tipe=' + type, {\n      headers: authHeader(),\n    })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      console.log(reason)\n    })\n}\n\nexport function createProduct(product) {\n  return axios\n    .post(API_URL + '/transaction/products', product, {\n      headers: authHeader(),\n    })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      console.log(reason.response.data)\n    })\n}\n\nexport function updateProduct(product) {\n  const changes = {\n    name: product.name,\n    description: product.description,\n    balance_start: product.balance_start,\n    percent_rate: product.percent_rate,\n    limit_min: product.limit_min,\n    limit_max: product.limit_max,\n    active: product.active,\n    rate_type: product.rate_type,\n  }\n\n  return axios\n    .put(API_URL + '/transaction/products/' + product.credit_simulation_id, changes, {\n      headers: authHeader(),\n    })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      return reason.response.data\n    })\n}\n\nexport function getServices() {\n  return axios\n    .get(API_URL + '/transaction/services', { headers: authHeader() })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      console.log(reason)\n    })\n}\n\nexport function getNasabah(searchQuery, status, sort) {\n  return axios\n    .get(\n      API_URL + '/nasabah/nasabah?search=' + searchQuery + '&status=' + status + '&sort=' + sort,\n      { headers: authHeader() },\n    )\n    .then((response) => {\n      return response.data.nasabah_list\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n\nexport function getNasabahCount() {\n  return axios\n    .get(API_URL + '/auth/stat/nasabah/all', { headers: authHeader() })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n\nexport function getAccountOfficerCount() {\n  return axios\n    .get(API_URL + '/auth/stat/account_officer/all', { headers: authHeader() })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n\nexport function getClientCount() {\n  return axios\n    .get(API_URL + '/auth/stat/clients/all', { headers: authHeader() })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n"],"sourceRoot":""}