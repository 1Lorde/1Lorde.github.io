{"version":3,"sources":["views/nasabah/nasabah_list/NasabahList.js","helpers/api_requests.js"],"names":["NasabahList","history","useHistory","hasLoaded","setHasLoaded","useState","nasabah","setNasabah","Table","columns","data","getTableProps","getTableBodyProps","headerGroups","prepareRow","page","canPreviousPage","canNextPage","pageOptions","pageCount","gotoPage","nextPage","previousPage","state","pageIndex","useTable","autoResetPageIndex","usePagination","hover","responsive","style","minWidth","map","headerGroup","index","getHeaderGroupProps","headers","column","getHeaderProps","render","row","getRowProps","cells","cell","getCellProps","className","min","max","type","defaultValue","onChange","e","target","value","Number","width","align","onClick","disabled","pointerEvents","length","useEffect","getNasabah","then","console","log","item","name","number","wa_number","location","address","status","active","action","color","size","push","id","React","useMemo","Header","accessor","xl","Loader","API_URL","getUsers","searchQuery","axios","get","authHeader","response","catch","reason","message","getUser","updateUser","user","put","role","createUser","post","getClient","updateClient","clientId","client","getClients","getProducts","createProduct","product","updateProduct","changes","description","balance_start","percent_rate","limit_min","limit_max","rate_type","credit_simulation_id","getServices","nasabah_list","getNasabahCount","getAccountOfficerCount"],"mappings":"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","file":"static/js/8.752d52e0.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCol,\n  CContainer,\n  CFormInput,\n  CFormSelect,\n  CHeaderText,\n  CPagination,\n  CPaginationItem,\n  CRow,\n  CTable,\n  CTableBody,\n  CTableDataCell,\n  CTableHead,\n  CTableHeaderCell,\n  CTableRow,\n} from '@coreui/react'\nimport { useHistory } from 'react-router-dom'\nimport { usePagination, useTable } from 'react-table'\nimport { getNasabah } from '../../../helpers/api_requests'\nimport Loader from '../../../components/Loader'\n\nconst NasabahList = () => {\n  const history = useHistory()\n  const [hasLoaded, setHasLoaded] = useState()\n  const [nasabah, setNasabah] = useState([])\n\n  // eslint-disable-next-line react/prop-types\n  function Table({ columns, data }) {\n    const {\n      getTableProps,\n      getTableBodyProps,\n      headerGroups,\n      prepareRow,\n      page,\n      canPreviousPage,\n      canNextPage,\n      pageOptions,\n      pageCount,\n      gotoPage,\n      nextPage,\n      previousPage,\n      state: { pageIndex },\n    } = useTable({ columns, data, autoResetPageIndex: true }, usePagination)\n\n    return (\n      <>\n        <CTable hover responsive style={{ minWidth: '45rem' }} {...getTableProps()}>\n          <CTableHead>\n            {headerGroups.map((headerGroup, index) => (\n              <CTableRow key={index} {...headerGroup.getHeaderGroupProps()}>\n                {headerGroup.headers.map((column, index) => (\n                  <CTableHeaderCell key={index} {...column.getHeaderProps()}>\n                    {column.render('Header')}\n                  </CTableHeaderCell>\n                ))}\n              </CTableRow>\n            ))}\n          </CTableHead>\n          <CTableBody {...getTableBodyProps()}>\n            {page.map((row, index) => {\n              prepareRow(row)\n              return (\n                <CTableRow key={index} {...row.getRowProps()}>\n                  {row.cells.map((cell, index) => {\n                    return (\n                      <CTableDataCell key={index} {...cell.getCellProps()}>\n                        {cell.render('Cell')}\n                      </CTableDataCell>\n                    )\n                  })}\n                </CTableRow>\n              )\n            })}\n          </CTableBody>\n        </CTable>\n\n        <CContainer className={'d-flex justify-content-end align-items-center'}>\n          <CHeaderText className={'pe-2'}>Go to page:</CHeaderText>\n          <CFormInput\n            min={1}\n            max={pageCount}\n            type=\"number\"\n            defaultValue={pageIndex + 1}\n            onChange={(e) => {\n              const page = e.target.value ? Number(e.target.value) - 1 : 0\n              gotoPage(page)\n            }}\n            style={{ width: '100px' }}\n          />\n        </CContainer>\n\n        <CPagination align=\"center\" aria-label=\"Page navigation\">\n          <CPaginationItem\n            aria-label=\"First\"\n            onClick={() => gotoPage(0)}\n            disabled={!canPreviousPage}\n          >\n            {'<<'}\n          </CPaginationItem>\n          <CPaginationItem\n            aria-label=\"Previous\"\n            onClick={() => previousPage()}\n            disabled={!canNextPage}\n          >\n            {'<'}\n          </CPaginationItem>\n          <CPaginationItem aria-label=\"Current\" style={{ pointerEvents: 'none' }}>\n            Page <strong>{pageIndex + 1}</strong> of <strong>{pageOptions.length}</strong>\n          </CPaginationItem>\n          <CPaginationItem aria-label=\"Next\" onClick={() => nextPage()} disabled={!canPreviousPage}>\n            {'>'}\n          </CPaginationItem>\n          <CPaginationItem\n            aria-label=\"Last\"\n            onClick={() => gotoPage(pageCount - 1)}\n            disabled={!canNextPage}\n          >\n            {'>>'}\n          </CPaginationItem>\n        </CPagination>\n      </>\n    )\n  }\n\n  useEffect(() => {\n    getNasabah().then((data) => {\n      console.log(data)\n      setNasabah(\n        data?.map((item) => {\n          return {\n            name: item.name,\n            number: item.wa_number,\n            location: item.address,\n            status: item.active ? 'Active' : 'Inactive',\n            action: (\n              <CButton color=\"dark\" size={'sm'} onClick={() => history.push('/nasabah/' + item.id)}>\n                Edit\n              </CButton>\n            ),\n          }\n        }),\n      )\n      setHasLoaded(true)\n    })\n  }, [])\n\n  const columns = React.useMemo(\n    () => [\n      {\n        Header: 'Name',\n        accessor: 'name',\n      },\n      {\n        Header: 'WhatsApp Number',\n        accessor: 'number',\n      },\n      {\n        Header: 'Location',\n        accessor: 'location',\n      },\n      {\n        Header: 'Status',\n        accessor: 'status',\n      },\n      {\n        Header: 'Action',\n        accessor: 'action',\n      },\n    ],\n    [],\n  )\n\n  return hasLoaded ? (\n    <CContainer>\n      <CRow className=\"align-items-center\">\n        <CCol xl={1}>Search</CCol>\n        <CCol>\n          <CFormInput></CFormInput>\n        </CCol>\n        <CCol>\n          <CFormSelect>\n            <option value=\"1\">One</option>\n            <option value=\"2\">Two</option>\n            <option value=\"3\">Three</option>\n          </CFormSelect>\n        </CCol>\n      </CRow>\n      <br />\n      <CRow>\n        <CCard>\n          <CCardBody>\n            {nasabah.length > 0 ? (\n              <Table columns={columns} data={nasabah} />\n            ) : (\n              <>\n                <div className=\"d-flex justify-content-center\">\n                  <CHeaderText>No nasabah found</CHeaderText>\n                </div>\n              </>\n            )}\n          </CCardBody>\n        </CCard>\n      </CRow>\n    </CContainer>\n  ) : (\n    Loader()\n  )\n}\n\nexport default NasabahList\n","import axios from 'axios'\nimport { authHeader } from './requestHeaders'\n\nconst API_URL = 'https://api.ekoop.id/v01'\n\nexport function getUsers(searchQuery) {\n  return axios\n    .get(API_URL + '/auth/user?search=' + searchQuery, { headers: authHeader() })\n    .then((response) => {\n      return response.data.data\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n\nexport function getUser(id) {\n  return axios\n    .get(API_URL + '/auth/user/' + id, { headers: authHeader() })\n    .then((response) => {\n      return response.data.data\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n\nexport function updateUser(user) {\n  return axios\n    .put(\n      API_URL + '/auth/user/' + user.id,\n      {\n        wa_number: user.wa_number,\n        name: user.name,\n        address: user.address,\n        role: user.role,\n        status: user.status,\n        // avatar: user.avatar,\n        // ktp_image: user.ktp_image,\n      },\n      {\n        headers: authHeader(),\n      },\n    )\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      return reason.response.data\n    })\n}\n\nexport function createUser(user) {\n  return axios\n    .post(API_URL + '/auth/user', user, {\n      headers: authHeader(),\n    })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      return reason.response.data\n    })\n}\n\nexport function getClient(id) {\n  return axios\n    .get(API_URL + '/users/admin/client/' + id, { headers: authHeader() })\n    .then((response) => {\n      return response.data.data\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n\nexport function updateClient(clientId, client) {\n  return axios\n    .put(API_URL + '/users/admin/client/' + clientId, client, {\n      headers: authHeader(),\n    })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      return reason.response.data\n    })\n}\n\nexport function getClients() {\n  return axios\n    .get(API_URL + '/users/admin/client', { headers: authHeader() })\n    .then((response) => {\n      return response.data.data\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n\nexport function getProducts(searchQuery, type) {\n  return axios\n    .get(API_URL + '/transaction/products?search=' + searchQuery + '&tipe=' + type, {\n      headers: authHeader(),\n    })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      console.log(reason)\n    })\n}\n\nexport function createProduct(product) {\n  return axios\n    .post(API_URL + '/transaction/products', product, {\n      headers: authHeader(),\n    })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      console.log(reason.response.data)\n    })\n}\n\nexport function updateProduct(product) {\n  const changes = {\n    name: product.name,\n    description: product.description,\n    balance_start: product.balance_start,\n    percent_rate: product.percent_rate,\n    limit_min: product.limit_min,\n    limit_max: product.limit_max,\n    active: product.active,\n    rate_type: product.rate_type,\n  }\n\n  return axios\n    .put(API_URL + '/transaction/products/' + product.credit_simulation_id, changes, {\n      headers: authHeader(),\n    })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      return reason.response.data\n    })\n}\n\nexport function getServices() {\n  return axios\n    .get(API_URL + '/transaction/services', { headers: authHeader() })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      console.log(reason)\n    })\n}\n\nexport function getNasabah() {\n  return axios\n    .get(API_URL + '/nasabah/nasabah', { headers: authHeader() })\n    .then((response) => {\n      return response.data.nasabah_list\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n\nexport function getNasabahCount() {\n  return axios\n    .get(API_URL + '/auth/stat/nasabah/all', { headers: authHeader() })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n\nexport function getAccountOfficerCount() {\n  return axios\n    .get(API_URL + '/auth/stat/account_officer/all', { headers: authHeader() })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n\nexport function getClientCount() {\n  return axios\n    .get(API_URL + '/auth/stat/clients/all', { headers: authHeader() })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n"],"sourceRoot":""}