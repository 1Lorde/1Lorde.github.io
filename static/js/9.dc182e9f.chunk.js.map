{"version":3,"sources":["views/nasabah/nasabah_create/NasabahCreate.js","helpers/notification_types.js","api/api_notification.js","api/api_nasabah.js"],"names":["NasabahCreate","userState","useContext","UserContext","history","useHistory","nasabah","setNasabah","useState","validated","setValidated","className","style","width","orientation","src","avatar","noValidate","onSubmit","event","preventDefault","form","currentTarget","checkValidity","stopPropagation","console","log","createNasabah","then","data","ok","createNotification","user","wa_number","Services","userCreate","name","resp","id","store","addNotification","success","push","message","danger","error","htmlFor","type","required","onChange","e","target","value","invalid","minLength","maxLength","ktp_id","pattern","address","group","color","changePassword","clientRegister","clientApprove","clientReject","userEdit","nasabahCreate","nasabahEdit","profileEdit","packageCreate","packageEdit","productCreate","productEdit","ppobAllMarginEdit","ppobEdit","Titles","Contents","API_URL","getNotifications","skip","axios","get","headers","authHeader","response","catch","reason","status","getNotification","sender","service","extra","notification","title","content","reference_id","post","getNasabahList","searchQuery","getNasabah","updateNasabah","put","active"],"mappings":"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","file":"static/js/9.dc182e9f.chunk.js","sourcesContent":["import React, { useContext, useState } from 'react'\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCardImage,\n  CContainer,\n  CForm,\n  CFormFeedback,\n  CFormInput,\n  CFormLabel,\n} from '@coreui/react'\n\nimport avatar from '../../../assets/images/avatar_placeholder.png'\nimport { useHistory } from 'react-router-dom'\nimport { store } from 'react-notifications-component'\nimport { danger, success } from '../../../helpers/notifications'\nimport { createNasabah } from '../../../api/api_nasabah'\nimport { createNotification } from '../../../api/api_notification'\nimport { Services } from '../../../helpers/notification_types'\nimport { UserContext } from '../../../helpers/user'\n\nconst NasabahCreate = () => {\n  const { userState } = useContext(UserContext)\n  const history = useHistory()\n  const [nasabah, setNasabah] = useState({})\n  const [validated, setValidated] = useState(false)\n\n  function handleCreate(event) {\n    event.preventDefault()\n\n    const form = event.currentTarget\n    if (form.checkValidity() === false) {\n      event.stopPropagation()\n    }\n    setValidated(true)\n\n    if (form.checkValidity()) {\n      console.log(nasabah)\n      createNasabah(nasabah).then((data) => {\n        if (data.ok) {\n          createNotification(userState.user.wa_number, Services.userCreate, nasabah.name).then(\n            (resp) => {\n              console.log('Notification created' + resp.id)\n            },\n          )\n          store.addNotification(success('Nasabah ' + nasabah.name + ' created successfully.'))\n          history.push('/nasabah')\n        } else {\n          if (data.message) {\n            console.log(data)\n            store.addNotification(danger(data.message))\n          } else {\n            console.log(data)\n            store.addNotification(danger(data.error))\n          }\n        }\n      })\n    }\n  }\n\n  return (\n    <CContainer className=\"d-flex justify-content-center\">\n      <CCard style={{ width: '35rem' }}>\n        <CCardImage orientation=\"top\" src={avatar} />\n        <CCardBody>\n          <CForm noValidate validated={validated} onSubmit={handleCreate}>\n            <div className=\"mb-3\">\n              <CFormLabel htmlFor=\"name\">Name</CFormLabel>\n              <CFormInput\n                type=\"text\"\n                id=\"name\"\n                required\n                onChange={(e) => {\n                  setNasabah((nasabah) => ({ ...nasabah, name: e.target.value }))\n                }}\n              />\n              <CFormFeedback invalid>Please provide a name.</CFormFeedback>\n            </div>\n            <div className=\"mb-3\">\n              <CFormLabel htmlFor=\"ktp\">KTP Number</CFormLabel>\n              <CFormInput\n                type=\"text\"\n                id=\"ktp\"\n                required\n                minLength={16}\n                maxLength={16}\n                onChange={(e) => {\n                  setNasabah((nasabah) => ({\n                    ...nasabah,\n                    ktp_id: e.target.value,\n                  }))\n                }}\n              />\n              <CFormFeedback invalid>Please provide a KTP ID (min length 16).</CFormFeedback>\n            </div>\n            <div className=\"mb-3\">\n              <CFormLabel htmlFor=\"wa\">WhatsApp Number</CFormLabel>\n              <CFormInput\n                type=\"tel\"\n                id=\"wa\"\n                required\n                pattern=\"^\\+62[0-9]{9,15}$\"\n                onChange={(e) => {\n                  setNasabah((nasabah) => ({\n                    ...nasabah,\n                    wa_number: e.target.value,\n                  }))\n                }}\n              />\n              <CFormFeedback invalid>Please provide a valid phone number.</CFormFeedback>\n            </div>\n            <div className=\"mb-3\">\n              <CFormLabel htmlFor=\"address\">Address</CFormLabel>\n              <CFormInput\n                type=\"text\"\n                id=\"address\"\n                minLength={5}\n                required\n                onChange={(e) => {\n                  setNasabah((nasabah) => ({\n                    ...nasabah,\n                    address: e.target.value,\n                  }))\n                }}\n              />\n              <CFormFeedback invalid>Please provide an address.</CFormFeedback>\n            </div>\n            <div className=\"mb-3\">\n              <CFormLabel htmlFor=\"group\">Group</CFormLabel>\n              <CFormInput\n                type=\"text\"\n                id=\"group\"\n                onChange={(e) => {\n                  setNasabah((nasabah) => ({\n                    ...nasabah,\n                    group: e.target.value,\n                  }))\n                }}\n              />\n            </div>\n            <div className=\"d-flex justify-content-end\">\n              <CButton color=\"primary\" type=\"submit\">\n                Create\n              </CButton>\n            </div>\n          </CForm>\n        </CCardBody>\n      </CCard>\n    </CContainer>\n  )\n}\n\nexport default NasabahCreate\n","export const Services = {\n  changePassword: 'change-password',\n  clientRegister: 'client-register',\n  clientApprove: 'client-approve',\n  clientReject: 'client-reject',\n  userCreate: 'user-create',\n  userEdit: 'user-edit',\n  nasabahCreate: 'nasabah-create',\n  nasabahEdit: 'nasabah-edit',\n  profileEdit: 'profile-edit',\n  packageCreate: 'package-create',\n  packageEdit: 'package-edit',\n  productCreate: 'product-create',\n  productEdit: 'product-edit',\n  ppobAllMarginEdit: 'ppob-all-margin-edit',\n  ppobEdit: 'ppob-edit',\n}\n\nexport const Titles = {\n  'change-password': 'Password changed',\n  'client-register': 'New client registered',\n  'client-approve': 'Request approved',\n  'client-reject': 'Request rejected',\n  'user-create': 'New user created',\n  'user-edit': 'User updated',\n  'nasabah-create': 'New nasabah created',\n  'nasabah-edit': 'Nasabah updated',\n  'profile-edit': 'Profile updated',\n  'package-create': 'New package created',\n  'package-edit': 'Package updated',\n  'product-create': 'New product created',\n  'product-edit': 'Product updated',\n  'ppob-all-margin-edit': 'All services margin updated',\n  'ppob-edit': 'PPOB updated',\n}\n\nexport const Contents = {\n  'change-password': \"User's password changed\",\n  'client-register': 'New client registration request created',\n  'client-approve': 'Client registration request approved',\n  'client-reject': 'Client registration request rejected',\n  'user-create': 'New user created: ',\n  'user-edit': 'User`s info edited: ',\n  'nasabah-create': 'New nasabah created: ',\n  'nasabah-edit': 'Nasabah`s info updated: ',\n  'profile-edit': 'Profile`s info updated',\n  'package-create': 'New package created: ',\n  'package-edit': 'Package`s info updated: ',\n  'product-create': 'New product created: ',\n  'product-edit': 'Product`s info updated: ',\n  'ppob-all-margin-edit': 'All services margin updated',\n  'ppob-edit': 'PPOB`s info updated: ',\n}\n","import axios from 'axios'\nimport { authHeader } from './requestHeaders'\nimport { Contents, Titles } from '../helpers/notification_types'\n\nconst API_URL = 'https://api.ekoop.id/v01'\n\nexport function getNotifications(skip) {\n  return axios\n    .get(API_URL + '/users/notification?skip=' + skip, { headers: authHeader() })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n\nexport function getNotification(id) {\n  return axios\n    .get(API_URL + '/users/notification/' + id, { headers: authHeader() })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n\nexport function createNotification(sender, service, extra) {\n  const notification = {\n    sender: sender,\n    service: service,\n    title: Titles[service],\n    content: Contents[service] + extra,\n    reference_id: '',\n  }\n\n  return axios\n    .post(API_URL + '/users/notification', notification, {\n      headers: authHeader(),\n    })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      console.log(reason.response.data)\n    })\n}\n","import axios from 'axios'\nimport { authHeader } from './requestHeaders'\n\nconst API_URL = 'https://api.ekoop.id/v01'\n\nexport function getNasabahList(skip, searchQuery, status) {\n  return axios\n    .get(\n      API_URL + '/nasabah/nasabah?search=' + searchQuery + '&status=' + status + '&skip=' + skip,\n      {\n        headers: authHeader(),\n      },\n    )\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n\nexport function getNasabah(id) {\n  return axios\n    .get(API_URL + '/nasabah/nasabah/' + id, { headers: authHeader() })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n\nexport function updateNasabah(id, nasabah) {\n  return axios\n    .put(\n      API_URL + '/nasabah/nasabah/' + id,\n      {\n        name: nasabah.name,\n        ktp_id: nasabah.ktp_id,\n        wa_number: nasabah.wa_number,\n        address: nasabah.address,\n        reason: nasabah.reason,\n        group: nasabah.group,\n        active: nasabah.active === 'true',\n      },\n      {\n        headers: authHeader(),\n      },\n    )\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      return reason.response.data\n    })\n}\n\nexport function createNasabah(nasabah) {\n  return axios\n    .post(API_URL + '/nasabah/nasabah', nasabah, {\n      headers: authHeader(),\n    })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      return reason.response.data\n    })\n}\n"],"sourceRoot":""}