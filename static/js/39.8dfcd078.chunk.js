(this.webpackJsonpekoop=this.webpackJsonpekoop||[]).push([[39],{1523:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(57),s=a(356),i=a(441);const c=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='286.903 256 416 177.877 416 141.115 415.717 140.646 272 227.617 272 72 240 72 240 227.617 96.283 140.646 96 141.115 96 177.877 225.097 256 96 334.123 96 370.885 96.283 371.354 240 284.383 240 440 272 440 272 284.383 415.717 371.354 416 370.885 416 334.123 286.903 256' class='ci-primary'/>"];var o=a(117),d=a(354),u=a(12),l=a(38),j=a(361),p=a(7);var h=e=>{const[t,a]=Object(n.useState)(""),[s,i]=Object(n.useState)("");let c=Object(u.g)();const{userDispatch:h}=Object(n.useContext)(l.a),[b,m]=Object(n.useState)(!1);return Object(p.jsxs)(r.v,{noValidate:!0,validated:b,children:[Object(p.jsx)("h2",{children:"Reset password"}),Object(p.jsx)("br",{}),Object(p.jsxs)("div",{className:"mb-3",children:[Object(p.jsx)(r.z,{htmlFor:"new_pass",children:"New Password"}),Object(p.jsx)(r.y,{type:"password",id:"new_pass",required:!0,onChange:e=>a(e.target.value)}),Object(p.jsx)(r.x,{invalid:!0,children:"Please provide new password."})]}),Object(p.jsxs)("div",{className:"mb-3",children:[Object(p.jsx)(r.z,{htmlFor:"confirm_new_pass",children:"Confirm New Password"}),Object(p.jsx)(r.y,{type:"password",id:"confirm_new_pass",required:!0,onChange:e=>i(e.target.value)}),Object(p.jsx)(r.x,{invalid:!0,children:"Please confirm new password."})]}),Object(p.jsx)("div",{className:"d-flex justify-content-end",children:Object(p.jsx)(r.e,{color:"primary",onClick:a=>{!1===a.currentTarget.checkValidity()&&(a.preventDefault(),a.stopPropagation()),t===s?(m(!0),Object(j.f)(e.userId,e.token,t).then((e=>{o.store.addNotification(Object(d.b)(e.message)),h({type:"request_reset",temp_token:e.auth_id}),c.push("/input_otp")})).catch((e=>{let t=e.response.data;console.log(t),o.store.addNotification(Object(d.a)(t.message))}))):o.store.addNotification(Object(d.a)("Check confirmation field"))},children:"Save"})})]})};t.default=()=>{const[e,t]=Object(n.useState)(""),[a,u]=Object(n.useState)(""),[l,b]=Object(n.useState)(!1),[m,f]=Object(n.useState)(""),[O,_]=Object(n.useState)(""),[x,g]=Object(n.useState)(!1);return Object(p.jsx)("div",{className:"bg-light min-vh-100 d-flex flex-row align-items-center",children:Object(p.jsx)(r.o,{children:Object(p.jsx)(r.X,{className:"justify-content-center",children:Object(p.jsx)(r.n,{md:5,children:Object(p.jsx)(r.h,{className:"p-4",children:Object(p.jsx)(r.i,{children:l?Object(p.jsx)(h,{userId:m,token:O}):Object(p.jsxs)(r.v,{noValidate:!0,validated:x,onSubmit:function(t){t.preventDefault();const n=t.currentTarget;!1===n.checkValidity()&&(t.preventDefault(),t.stopPropagation()),g(!0),n.checkValidity()&&Object(j.c)(e,a).then((e=>{e.ok?(o.store.addNotification(Object(d.b)(e.message)),f(e.url_link.split("/")[5]),_(e.url_link.split("/")[6]),b(!0)):o.store.addNotification(Object(d.a)(e.message))}))},children:[Object(p.jsx)("h2",{children:"Reset password"}),Object(p.jsx)("br",{}),Object(p.jsxs)(r.J,{className:"mb-3",children:[Object(p.jsx)(r.K,{children:Object(p.jsx)(s.a,{icon:i.a})}),Object(p.jsx)(r.y,{placeholder:"WhatsApp number",type:"tel",pattern:"^\\+62[0-9]{9,15}$",required:!0,value:e,onChange:e=>t(e.target.value)}),Object(p.jsx)(r.x,{invalid:!0,children:"Please provide a valid phone number."})]}),Object(p.jsxs)(r.J,{className:"mb-4",children:[Object(p.jsx)(r.K,{children:Object(p.jsx)(s.a,{icon:c})}),Object(p.jsx)(r.y,{placeholder:"KTP number",required:!0,pattern:"^[0-9]{16}$",value:a,onChange:e=>u(e.target.value)}),Object(p.jsx)(r.x,{invalid:!0,children:"Please provide a valid KTP number."})]}),Object(p.jsx)(r.X,{children:Object(p.jsx)(r.n,{className:"d-flex justify-content-end",children:Object(p.jsx)(r.e,{color:"primary",className:"px-4",type:"submit",children:"Submit"})})})]})})})})})})})}},352:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return i}));var n=a(38);function r(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}function s(){if(Object(n.e)()){return{Authorization:"Bearer "+localStorage.getItem("token"),"Ekoop-Api-Key":"4a6e486c-3167-4112-97e7-5aa690042613","X-Request-Id":r()}}return{}}function i(){return{"Ekoop-Api-Key":"4a6e486c-3167-4112-97e7-5aa690042613","X-Request-Id":r()}}},354:function(e,t,a){"use strict";function n(e){return{title:"Success",message:e,type:"success",insert:"bottom",container:"bottom-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:5e3}}}function r(e){return{title:"Error",message:e,type:"danger",insert:"bottom",container:"bottom-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:5e3}}}function s(e){return{title:"Info",message:e,type:"info",insert:"bottom",container:"bottom-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:5e3}}}a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s}))},361:function(e,t,a){"use strict";a.d(t,"d",(function(){return c})),a.d(t,"e",(function(){return o})),a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return l})),a.d(t,"f",(function(){return j})),a.d(t,"g",(function(){return p}));var n=a(353),r=a.n(n),s=a(352);const i="https://api.ekoop.id/v01";function c(e,t){return r.a.post(i+"/auth/auth/login/password",{wa_number:e,password:t},{headers:Object(s.a)()}).then((e=>e.data)).catch((e=>e.response.data))}function o(e,t){return r.a.post(i+"/auth/auth/login/otp",{auth_id:e,otp:t},{headers:Object(s.a)()}).then((e=>(e.data.access_token&&localStorage.setItem("token",e.data.access_token),e.data)))}function d(e,t){return r.a.post(i+"/auth/profile/change_password",{old_password:e,new_password:t},{headers:Object(s.b)()}).then((e=>(console.log(e.data),e.data)))}function u(e){return r.a.post(i+"/auth/profile/change_password/otp",{otp:e},{headers:Object(s.b)()}).then((e=>(console.log(e),e.data)))}function l(e,t){return r.a.post(i+"/auth/auth/forgot_password",{wa_number:e,ktp_id:t},{headers:Object(s.a)()}).then((e=>e.data)).catch((e=>e.response.data))}function j(e,t,a){return console.log(e),r.a.post(i+"/auth/auth/reset_password",{user_id:e,token:t,new_password:a},{headers:Object(s.a)()}).then((e=>e.data)).catch((e=>e.response.data))}function p(e,t){return r.a.post(i+"/auth/auth/reset_password_otp",{auth_id:e,otp:t},{headers:Object(s.a)()}).then((e=>e.data)).catch((e=>e.response.data))}},441:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M449.366,89.648l-.685-.428L362.088,46.559,268.625,171.176l43,57.337a88.529,88.529,0,0,1-83.115,83.114l-57.336-43L46.558,362.088l42.306,85.869.356.725.429.684a25.085,25.085,0,0,0,21.393,11.857h22.344A327.836,327.836,0,0,0,461.222,133.386V111.041A25.084,25.084,0,0,0,449.366,89.648Zm-20.144,43.738c0,163.125-132.712,295.837-295.836,295.837h-18.08L87,371.76l84.18-63.135,46.867,35.149h5.333a120.535,120.535,0,0,0,120.4-120.4v-5.333l-35.149-46.866L371.759,87l57.463,28.311Z' class='ci-primary'/>"]}}]);
//# sourceMappingURL=39.8dfcd078.chunk.js.map