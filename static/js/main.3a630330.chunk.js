(this.webpackJsonpekoop=this.webpackJsonpekoop||[]).push([[29],{121:function(t,e,n){"use strict";var r=n(60),a=(n(0),n(8));e.a=()=>Object(a.jsx)("div",{className:"bg-light min-vh-100 d-flex flex-row align-items-center",children:Object(a.jsx)(r.o,{children:Object(a.jsx)(r.S,{children:Object(a.jsx)(r.n,{className:"d-flex justify-content-center",children:Object(a.jsx)(r.X,{color:"primary"})})})})})},216:function(t,e,n){"use strict";n(0);var r=n(12),a=n(34),o=n(72),c=n(8);e.a=function(t){const e=Object(a.i)(),{component:n,allowedRoles:s,...u}=t;return Object(c.jsx)(r.b,{...u,render:t=>Object(a.k)()||!localStorage.getItem("token")?Object(c.jsx)(r.a,{to:"/login"}):s.includes(o.c[e])?Object(c.jsx)(n,{...t}):Object(c.jsx)(r.a,{to:"/401"})})}},32:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return c}));var r=n(34);function a(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)))}function o(){if(Object(r.j)()){return{Authorization:"Bearer "+localStorage.getItem("token"),"Ekoop-Api-Key":"4a6e486c-3167-4112-97e7-5aa690042613","X-Request-Id":a()}}return{}}function c(){return{"Ekoop-Api-Key":"4a6e486c-3167-4112-97e7-5aa690042613","X-Request-Id":a()}}},34:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return i})),n.d(e,"q",(function(){return d})),n.d(e,"l",(function(){return p})),n.d(e,"m",(function(){return h})),n.d(e,"h",(function(){return f})),n.d(e,"c",(function(){return j})),n.d(e,"d",(function(){return b})),n.d(e,"f",(function(){return O})),n.d(e,"n",(function(){return g})),n.d(e,"o",(function(){return m})),n.d(e,"p",(function(){return _})),n.d(e,"g",(function(){return w})),n.d(e,"e",(function(){return x})),n.d(e,"j",(function(){return k})),n.d(e,"k",(function(){return y})),n.d(e,"i",(function(){return v}));var r=n(0),a=n(31),o=n.n(a),c=n(32),s=n(91);const u={TRY_TO_LOGIN:"login",RESET_PASS:"reset",WAITING_FOR_OTP:"otp",AUTHORIZED:"authorized",LOGGED_OUT:"logout"},i=Object(r.createContext)();function d(t,e){return"request_login"===e.type?t={status:u.TRY_TO_LOGIN,temp_token:e.temp_token}:"request_otp"===e.type?t={status:u.WAITING_FOR_OTP,user:e.user,company:e.company}:"login"===e.type?t={status:u.AUTHORIZED,user:e.user,company:e.company}:"logout"===e.type?t={status:u.LOGGED_OUT}:"request_reset"===e.type&&(t={status:u.RESET_PASS,temp_token:e.temp_token}),t}const l="https://api.ekoop.id/v01";function p(t,e){return o.a.post(l+"/auth/auth/login/password",{wa_number:t,password:e},{headers:Object(c.a)()}).then((t=>t.data)).catch((t=>t.response.data))}function h(t,e){return o.a.post(l+"/auth/auth/login/otp",{auth_id:t,otp:e},{headers:Object(c.a)()}).then((t=>(t.data.access_token&&localStorage.setItem("token",t.data.access_token),t.data)))}function f(){return o.a.get(l+"/auth/profile",{headers:Object(c.b)()}).then((t=>t.data.data)).catch((()=>null))}function j(t,e){return o.a.post(l+"/auth/profile/change_password",{old_password:t,new_password:e},{headers:Object(c.b)()}).then((t=>(console.log(t.data),t.data)))}function b(t){return o.a.post(l+"/auth/profile/change_password/otp",{otp:t},{headers:Object(c.b)()}).then((t=>(console.log(t),t.data)))}function O(t,e){return o.a.post(l+"/auth/auth/forgot_password",{wa_number:t,ktp_id:e},{headers:Object(c.a)()}).then((t=>t.data)).catch((t=>t.response.data))}function g(t,e,n){return console.log(t),o.a.post(l+"/auth/auth/reset_password",{user_id:t,token:e,new_password:n},{headers:Object(c.a)()}).then((t=>t.data)).catch((t=>t.response.data))}function m(t,e){return o.a.post(l+"/auth/auth/reset_password_otp",{auth_id:t,otp:e},{headers:Object(c.a)()}).then((t=>t.data)).catch((t=>t.response.data))}function _(t){return o.a.put(l+"/auth/profile",t,{headers:Object(c.b)()}).then((t=>t.data)).catch((t=>t.response.data))}function w(){return o.a.get(l+"/users/profile",{headers:Object(c.b)()}).then((t=>t.data.data)).catch((t=>{if(403===t.response.status)return console.log(t.message),null}))}function x(){localStorage.removeItem("token")}function k(){const t=localStorage.getItem("token");if(!t)return!1;try{const e=Object(s.a)(t);return e.exp-e.iat>10800}catch(e){return!1}}function y(){const t=localStorage.getItem("token");if(!t)return!1;try{const e=Object(s.a)(t);return e.exp-e.iat===10800}catch(e){return!1}}function v(){try{return Object(s.a)(localStorage.getItem("token")).role}catch(t){return x(),null}}},351:function(t,e,n){},381:function(t,e,n){"use strict";n.r(e);n(128),n(137),n(138),n(140),n(73),n(124),n(146),n(147),n(148),n(152),n(153),n(154),n(158),n(159),n(160),n(161),n(164),n(165),n(166),n(172),n(92),n(176),n(125),n(180),n(181),n(182),n(183),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(240),n(242),n(243),n(244),n(248),n(249),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(283),n(284),n(285),n(287),n(288),n(290),n(292),n(293),n(294),n(295),n(296),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(325),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(126),n(203),n(204),n(205),n(207),n(117),n(344);var r=n(0),a=n.n(r),o=n(22),c=n.n(o),s=n(71),u=n(12),i=n(122),d=n.n(i),l=(n(351),n(352),n(353),n(34)),p=n(8);var h=function(t){const{component:e,restricted:n=!1,...r}=t;return Object(p.jsx)(u.b,{...r,render:t=>Object(l.j)()&&n?Object(p.jsx)(u.a,{to:"/profile"}):Object(p.jsx)(e,{...t})})},f=n(216),j=n(121),b=n(72);const O=a.a.lazy((()=>Promise.all([n.e(1),n.e(32),n.e(33)]).then(n.bind(null,1505)))),g=a.a.lazy((()=>Promise.all([n.e(1),n.e(34)]).then(n.bind(null,1509)))),m=a.a.lazy((()=>Promise.all([n.e(1),n.e(35)]).then(n.bind(null,1507)))),_=a.a.lazy((()=>n.e(36).then(n.bind(null,1508)))),w=a.a.lazy((()=>n.e(38).then(n.bind(null,1478)))),x=a.a.lazy((()=>n.e(37).then(n.bind(null,1479))));function k(){const[t,e]=Object(r.useReducer)(l.q,{});return Object(p.jsx)(s.a,{children:Object(p.jsxs)(a.a.Suspense,{fallback:Object(j.a)(),children:[Object(p.jsx)(d.a,{}),Object(p.jsx)(l.a.Provider,{value:{userState:t,userDispatch:e},children:Object(p.jsxs)(u.d,{children:[Object(p.jsx)(h,{exact:!0,restricted:!0,component:g,path:"/login"}),Object(p.jsx)(h,{exact:!0,restricted:!0,component:m,path:"/reset_password"}),Object(p.jsx)(h,{exact:!0,component:_,path:"/input_otp"}),Object(p.jsx)(h,{exact:!0,component:w,path:"/404"}),Object(p.jsx)(h,{exact:!0,component:x,path:"/401"}),Object(p.jsx)(f.a,{allowedRoles:Object(b.d)(),component:O,path:"/"})]})})]})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var y=n(127),v=n(219);const I={sidebarShow:!0};var S=Object(v.a)(((t=I,{type:e,...n})=>"set"===e?{...t,...n}:t));c.a.render(Object(p.jsx)(y.a,{store:S,children:Object(p.jsx)(k,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((t=>{t.unregister()}))},72:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return c}));const r={"app-owner":"App Owner","product-technical":"Product & Technical","marketing-finance":"Marketing & Finance","koperasi-owner":"Koperasi Owner","credit-analyst":"Credit Analyst","account-officer":"Account Officer"},a={"koperasi-owner":"Koperasi Owner","credit-analyst":"Credit Analyst","account-officer":"Account Officer"},o={"app-owner":"App Owner","product-technical":"Product & Technical","marketing-finance":"Marketing & Finance"};function c(){return Object.keys(r).map((function(t){return r[t]}))}}},[[381,30,31]]]);
//# sourceMappingURL=main.3a630330.chunk.js.map