{"version":3,"sources":["views/nasabah/nasabah_create/NasabahCreate.js","api/api_package.js","api/api_nasabah.js"],"names":["NasabahCreate","history","useHistory","nasabah","setNasabah","useState","validated","setValidated","className","style","width","orientation","src","avatar","noValidate","onSubmit","event","preventDefault","form","currentTarget","checkValidity","stopPropagation","console","log","createNasabah","then","data","ok","store","addNotification","success","name","push","message","danger","error","htmlFor","type","id","required","onChange","e","target","value","invalid","minLength","maxLength","ktp_id","pattern","wa_number","address","group","color","API_URL","getPackages","axios","get","headers","apiHeader","response","catch","reason","getAdminPackages","authHeader","getPackage","updatePackage","pack","put","slug","description","price_monthly","price","monthly","price_yearly","yearly","quota_AO","quota","account_officer","quota_nasabah","active","createPackage","post","getNasabahList","searchQuery","status","nasabah_list","getNasabah","updateNasabah"],"mappings":"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","file":"static/js/5.98193ef2.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCardHeader,\n  CCardImage,\n  CCol,\n  CContainer,\n  CForm,\n  CFormFeedback,\n  CFormInput,\n  CFormLabel,\n  CFormSelect,\n  CFormTextarea,\n  CRow,\n} from '@coreui/react'\n\nimport avatar from '../../../assets/images/avatar_placeholder.png'\nimport { useHistory, useParams } from 'react-router-dom'\nimport { createPackage, getPackage } from '../../../api/api_package'\nimport { store } from 'react-notifications-component'\nimport { danger, success } from '../../../helpers/notifications'\nimport { createNasabah, getNasabah } from '../../../api/api_nasabah'\nimport Loader from '../../../components/Loader'\n\nconst NasabahCreate = () => {\n  const history = useHistory()\n  const [nasabah, setNasabah] = useState({})\n  const [validated, setValidated] = useState(false)\n\n  function handleCreate(event) {\n    event.preventDefault()\n\n    const form = event.currentTarget\n    if (form.checkValidity() === false) {\n      event.stopPropagation()\n    }\n    setValidated(true)\n\n    if (form.checkValidity()) {\n      console.log(nasabah)\n      createNasabah(nasabah).then((data) => {\n        if (data.ok) {\n          store.addNotification(success('Nasabah ' + nasabah.name + ' created successfully.'))\n          history.push('/nasabah')\n        } else {\n          if (data.message) {\n            console.log(data)\n            store.addNotification(danger(data.message))\n          } else {\n            console.log(data)\n            store.addNotification(danger(data.error))\n          }\n        }\n      })\n    }\n  }\n\n  return (\n    <CContainer className=\"d-flex justify-content-center\">\n      <CCard style={{ width: '35rem' }}>\n        <CCardImage orientation=\"top\" src={avatar} />\n        <CCardBody>\n          <CForm noValidate validated={validated} onSubmit={handleCreate}>\n            <div className=\"mb-3\">\n              <CFormLabel htmlFor=\"name\">Name</CFormLabel>\n              <CFormInput\n                type=\"text\"\n                id=\"name\"\n                required\n                onChange={(e) => {\n                  setNasabah((nasabah) => ({ ...nasabah, name: e.target.value }))\n                }}\n              />\n              <CFormFeedback invalid>Please provide a name.</CFormFeedback>\n            </div>\n            <div className=\"mb-3\">\n              <CFormLabel htmlFor=\"ktp\">KTP Number</CFormLabel>\n              <CFormInput\n                type=\"text\"\n                id=\"ktp\"\n                required\n                minLength={16}\n                maxLength={16}\n                onChange={(e) => {\n                  setNasabah((nasabah) => ({\n                    ...nasabah,\n                    ktp_id: e.target.value,\n                  }))\n                }}\n              />\n              <CFormFeedback invalid>Please provide a KTP ID (min length 16).</CFormFeedback>\n            </div>\n            <div className=\"mb-3\">\n              <CFormLabel htmlFor=\"wa\">WhatsApp Number</CFormLabel>\n              <CFormInput\n                type=\"tel\"\n                id=\"wa\"\n                required\n                pattern=\"^\\+62[0-9]{9,15}$\"\n                onChange={(e) => {\n                  setNasabah((nasabah) => ({\n                    ...nasabah,\n                    wa_number: e.target.value,\n                  }))\n                }}\n              />\n              <CFormFeedback invalid>Please provide a valid phone number.</CFormFeedback>\n            </div>\n            <div className=\"mb-3\">\n              <CFormLabel htmlFor=\"address\">Address</CFormLabel>\n              <CFormInput\n                type=\"text\"\n                id=\"address\"\n                minLength={5}\n                required\n                onChange={(e) => {\n                  setNasabah((nasabah) => ({\n                    ...nasabah,\n                    address: e.target.value,\n                  }))\n                }}\n              />\n              <CFormFeedback invalid>Please provide an address.</CFormFeedback>\n            </div>\n            <div className=\"mb-3\">\n              <CFormLabel htmlFor=\"group\">Group</CFormLabel>\n              <CFormInput\n                type=\"text\"\n                id=\"group\"\n                onChange={(e) => {\n                  setNasabah((nasabah) => ({\n                    ...nasabah,\n                    group: e.target.value,\n                  }))\n                }}\n              />\n            </div>\n            <div className=\"d-flex justify-content-end\">\n              <CButton color=\"primary\" type=\"submit\">\n                Create\n              </CButton>\n            </div>\n          </CForm>\n        </CCardBody>\n      </CCard>\n    </CContainer>\n  )\n}\n\nexport default NasabahCreate\n","import axios from 'axios'\nimport { apiHeader, authHeader } from './requestHeaders'\n\nconst API_URL = 'https://api.ekoop.id/v01'\n\nexport function getPackages() {\n  return axios\n    .get(API_URL + '/users/packages', { headers: apiHeader() })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      console.log(reason)\n    })\n}\n\nexport function getAdminPackages() {\n  return axios\n    .get(API_URL + '/users/admin/packages', { headers: authHeader() })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      console.log(reason)\n    })\n}\n\nexport function getPackage(id) {\n  return axios\n    .get(API_URL + '/users/admin/packages/' + id, { headers: authHeader() })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      console.log(reason)\n    })\n}\n\nexport function updatePackage(id, pack) {\n  return axios\n    .put(\n      API_URL + '/users/admin/packages/' + id,\n      {\n        name: pack.name,\n        slug: pack.slug,\n        description: pack.description,\n        price_monthly: pack.price.monthly,\n        price_yearly: pack.price.yearly,\n        quota_AO: pack.quota.account_officer,\n        quota_nasabah: pack.quota.nasabah,\n        active: pack.active === 'true',\n      },\n      {\n        headers: authHeader(),\n      },\n    )\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      return reason.response.data\n    })\n}\n\nexport function createPackage(pack) {\n  return axios\n    .post(\n      API_URL + '/users/admin/packages',\n      {\n        name: pack.name,\n        slug: pack.slug,\n        description: pack.description,\n        price_monthly: pack.price.monthly,\n        price_yearly: pack.price.yearly,\n        quota_AO: pack.quota.account_officer,\n        quota_nasabah: pack.quota.nasabah,\n      },\n      {\n        headers: authHeader(),\n      },\n    )\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      return reason.response.data\n    })\n}\n","import axios from 'axios'\nimport { authHeader } from './requestHeaders'\n\nconst API_URL = 'https://api.ekoop.id/v01'\n\nexport function getNasabahList(searchQuery, status) {\n  return axios\n    .get(API_URL + '/nasabah/nasabah?search=' + searchQuery + '&status=' + status, {\n      headers: authHeader(),\n    })\n    .then((response) => {\n      return response.data.nasabah_list\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n\nexport function getNasabah(id) {\n  return axios\n    .get(API_URL + '/nasabah/nasabah/' + id, { headers: authHeader() })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      if (reason.response.status === 403) {\n        console.log(reason.message)\n        return null\n      }\n    })\n}\n\nexport function updateNasabah(id, nasabah) {\n  return axios\n    .put(\n      API_URL + '/nasabah/nasabah/' + id,\n      {\n        name: nasabah.name,\n        ktp_id: nasabah.ktp_id,\n        wa_number: nasabah.wa_number,\n        address: nasabah.address,\n        reason: nasabah.reason,\n        group: nasabah.group,\n        active: nasabah.active === 'true',\n      },\n      {\n        headers: authHeader(),\n      },\n    )\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      return reason.response.data\n    })\n}\n\nexport function createNasabah(nasabah) {\n  return axios\n    .post(API_URL + '/nasabah/nasabah', nasabah, {\n      headers: authHeader(),\n    })\n    .then((response) => {\n      return response.data\n    })\n    .catch((reason) => {\n      return reason.response.data\n    })\n}\n"],"sourceRoot":""}